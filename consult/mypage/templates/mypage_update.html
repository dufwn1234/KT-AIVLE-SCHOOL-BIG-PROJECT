{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <!-- Viewport-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no" />
    <!-- SEO Meta Tags-->
    <meta name="keywords" content="quicky, chat, messenger, conversation, social, communication" />
    <meta name="description" content="Quicky is a Bootstrap based modern and fully responsive Messaging template to help build Messaging or Chat application fast and easy." />
    <meta name="subject" content="communication">
    <meta name="copyright" content="frontendmatters">
     <meta name="revised" content="Tuesday, November 10th, 2020, 08:00 am" />
    <title>My page</title>
    <!-- Favicon and Touch Icons-->
    <link rel="icon" type="image/png" sizes="32x32" href="{%static "assets/img/favicons/favicon-96x96.png" %}">
    <link rel="icon" type="image/png" sizes="32x32" href="{%static "assets/img/favicons/favicon-32x32.png" %}">
    <link rel="icon" type="image/png" sizes="16x16" href="{%static "assets/img/favicons/favicon-16x16.png" %}">
    <link rel="shortcut icon" type="image/x-icon" href="{%static "assets/img/favicons/favicon.ico" %}">
    <link rel="manifest" href="{%static "assets/img/favicons/manifest.json" %}">
    <meta name="msapplication-TileImage" content="{%static "assets/img/favicons/ms-icon-150x150.png" %}">
    <meta name="theme-color" content="#ffffff"> 

    <link rel="stylesheet" href='{% static "webfonts/inter/inter.css" %}'> 
    <link rel="stylesheet" href='{% static "css/app.min.css" %}'>

    <script src="https://code.jquery.com/jquery-3.6.0.slim.js" integrity="sha256-HwWONEZrpuoh951cQD1ov2HUK5zA5DwJ1DNUXaM6FsY=" crossorigin="anonymous"></script>
    <script src="{% static 'js/mypage.js' %}"></script>

    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    
    <script>
        window.console = window.console || function(t) {};
        </script>
    
        <script type="text/javascript">
            function checkDisable(form) {
                if (form.ck.checked == true) {
                    form.delete_btn.disabled = false;
                } else {
                    form.delete_btn.disabled = true;
                }
            }
        </script>
        
</head>

<body class="chats-tab-open">

    <!-- Main Layout Start -->
    <div class="main-layout">
        <!-- Navigation Start -->
        <div class="navigation navbar navbar-light bg-primary">
            <!-- Logo Start -->
            <a class="d-none d-xl-block bg-light rounded p-1" href="/">
                <!-- Default :: Inline SVG -->
                <svg height="30" width="30" viewBox="0 0 24 24">
                    <path d="M21 9.172V21H3V9.172L12 2.828l9 6.344zM14 19h-4v-4h4v4z" fill="#6f42c1" />
                  </svg>
            </a>
            <!-- Logo End -->

            <!-- Main Nav Start -->
            <ul class="nav nav-minimal flex-row flex-grow-1 justify-content-between flex-xl-column justify-content-xl-center" id="mainNavTab" role="tablist">
                <!-- Profile Tab Start -->
                <li class="nav-item">
                    <a class="nav-link p-0 py-xl-3" id="profile-tab" href="#profile-content" title="Profile">
                        <!-- Default :: Inline SVG -->
                        
                    </a>
                </li>
                <!-- Profile Tab End -->
            </ul>
            <!-- Main Nav End -->
        </div>
        <!-- Navigation End -->

        <!-- Sidebar Start -->
        <aside class="sidebar">
            <!-- Tab Content Start -->
            <div class="tab-content">
                <!-- Profile Tab Content Start -->
                <div class="tab-pane active" id="profile-content">
                    <div class="d-flex flex-column h-100">
                        <div class="hide-scrollbar">
                            <!-- Sidebar Header Start -->
                            <div class="sidebar-header sticky-top p-2 mb-3">
                                <h5 class="font-weight-semibold">My Page</h5>
                                <p class="text-muted mb-0">개인 정보 & 설정</p>
                            </div>
                            <!-- Sidebar Header end -->

                            <!-- Sidebar Content Start -->
                            <div class="container-xl" method="POST" class="update_form" id="UpdateForm" name="UpdateForm" enctype="multipart/form-data">
                                {% csrf_token %}
                                <div class="row">
                                    <div class="col">

                                        <!-- Card Start -->
                                        <div class="card card-body card-bg-5">

                                            <!-- Card Details Start -->
                                            <div class="d-flex flex-column align-items-center">
                                                <div class="avatar avatar-lg mb-3">
                                                    <img class="avatar-img" {% if request.user.image %}src={{ request.user.image.url }}{% else %}src="{% static 'images/user_default_image.png' %}" {% endif %} alt="">
                                                </div>
                
                                                <div class="d-flex flex-column align-items-center">
                                                    <h5>{{ request.user.username }}</h5>
                                                </div>

                                                <div class="d-flex">
                                                    <button class="btn btn-outline-default mx-1" type="button">
                                                        <!-- Default :: Inline SVG -->
                                                        <svg class="hw-18 d-none d-sm-inline-block" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"/>
                                                        </svg>
                                                        <a href="/accounts/logout/"><span>Logout</span></a>
 
                                                    </button>

                                                    <button class="btn btn-outline-default mx-1 d-xl-none" data-profile-edit="" type="button">
                                                        <!-- Default :: Inline SVG -->
                                                        <svg class="hw-18 d-none d-sm-inline-block" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/>
                                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                                                        </svg>
                                                        <span>Settings</span> 
                                                    </button>
                                                </div>
                                                <div class="card-options">
                                                    <div class="dropdown">
                                                        <button class="btn btn-secondary btn-icon btn-minimal btn-sm text-muted text-muted" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                                            <!-- Default :: Inline SVG -->
                                                            <svg class="hw-20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"/>
                                                            </svg>
                                                        </button>
                                                        <div class="dropdown-menu">
                                                            <form method="POST" enctype="multipart/form-data" action="{% url 'mypage:img_update' %}"> 
                                                                {% csrf_token %}
                                                                <!-- form -> img_form 변경-->
                                                                <label class="dropdown-item" for="{{ img_form.image.id_for_label }}">Change Profile Picture</label>
                                                                <input id="{{ img_form.image.id_for_label }}" name="{{ img_form.image.html_name }}" type="file" accept="image/*" style="display:none;" onchange="this.form.submit();"/>
                                                            </form>
                                                            <a class="dropdown-item" href="{% url 'mypage:img_delete' %}">Delete Profile Picture</a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- Card End -->

                                        <!-- Card Start -->
                                        <div class="card mt-3">

                                            <!-- List Group Start -->
                                            <ul class="list-group list-group-flush">
                                                
                                                <!-- List Group Item Start -->
                                                <li class="list-group-item py-2">
                                                    <div class="media align-items-center">
                                                        <div class="media-body">
                                                            <p class="small text-muted mb-0">ID</p>
                                                            <p class="mb-0">{{ request.user.username }}</p>
                                                        </div>
                                                        <!-- Default :: Inline SVG -->
                                                        <svg class="text-muted hw-20 ml-1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                                            <circle cx="12" cy="12" r="10" />
                                                            <line x1="12" y1="16" x2="12" y2="12" />
                                                            <line x1="12" y1="8" x2="12" y2="8" />
                                                            <circle cx="12" cy="12" r="1" />
                                                          </svg>
                                                    </div>
                                                </li>
                                                <!-- List Group Item End -->

                                                <!-- List Group Item Start -->
                                                <li class="list-group-item py-2">
                                                    <div class="media align-items-center">
                                                        <div class="media-body">
                                                            <p class="small text-muted mb-0">Phone</p>
                                                            <p class="mb-0">{{ request.user.phone_number }}</p>
                                                        </div>
                                                        <!-- Default :: Inline SVG -->
                                                        <svg class="text-muted hw-20 ml-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
                                                        </svg>
                                                    </div>
                                                </li>
                                                <!-- List Group Item End -->

                                                <!-- List Group Item Start -->
                                                <li class="list-group-item py-2">
                                                    <div class="media align-items-center">
                                                        <div class="media-body">
                                                            <p class="small text-muted mb-0">Email</p>
                                                            <p class="mb-0">{{ request.user.email }}</p>
                                                        </div>

                                                        <!-- Default :: Inline SVG -->
                                                        <svg class="text-muted hw-20 ml-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
                                                        </svg>
                                                    </div>
                                                </li>
                                                <!-- List Group Item End -->
                                            </ul>
                                            <!-- List Group End -->

                                        </div>
                                        <!-- Card End -->
                                    </div>
                                </div>
                            </div>
                            <!-- Sidebar Content End -->
                        </div>
                    </div>
                </div>
                <!-- Profile Tab Content End -->
            </div>
            <!-- Tab Content End -->
        </aside>
        <!-- Sidebar End -->

        <!-- Main Start -->
        <main class="main">
            <form method="POST" class="update_form" id="UpdateForm" name="UpdateForm" enctype="multipart/form-data">
                {% csrf_token %}
                <div class="chat-body">
                    <div class="page-main-heading sticky-top py-2 px-3 mb-3">
                        <button class="btn btn-secondary btn-icon btn-minimal btn-sm text-muted d-xl-none" type="button" data-close="">
                            <svg class="hw-20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"/>
                            </svg>
                        </button>
                        <div class="pl-2 pl-xl-0">
                            <h5 class="font-weight-semibold">설정</h5>
                            <p class="text-muted mb-0">개인정보 수정 &amp; 설정</p>
                        </div>
                    </div>
                    <div class="container-xl px-2 px-sm-3">
                        <div class="row">
                            <div class="col">
                                <div class="card mb-3">
                                    <div class="card-header">
                                        <h6 class="mb-1">계정</h6>
                                        <p class="mb-0 text-muted small">개인정보 수정 &amp; 연락처 정보</p>
                                    </div>
                                    <div class="card-body">
                                        <div class="row">
                                            <div class="col-md-6 col-12">
                                                <div class="form-group">
                                                    <label for="firstName">이름 <span style="color: red">*</span><span style="color: red">변경 불가</span></label>
                                                    <input type="text" class="form-control form-control-md" id="firstName" placeholder="Type your first name" value="{{ request.user.username }}" readonly style="background-color: white;">
                                                </div>
                                            </div>
                                            <div class="update_detail col-md-6 col-12">
                                                <div class="form-group">
                                                    <label for="{{ form.phone_number.id_for_label }}">핸드폰 번호</label>
                                                    <input type="text" class="form-control form-control-md" id="{{ form.phone_number.id_for_label }}" name="{{ form.phone_number.html_name }}" 
                                                        placeholder="{{ request.user.phone_number }}" value="{{ form.phone_number.value|default_if_none:'' }}">
                                                </div>
                                            </div>
                                            <div class="update_detail col-md-6 col-12">
                                                <div class="form-group">
                                                    <label for="{{ form.email.id_for_label }}">이메일 주소</label>
                                                    <input type="email" class="form-control form-control-md" id="{{ form.email.id_for_label }}" name="{{ form.email.html_name }}"  
                                                        placeholder="{{ request.user.email }}" value="{{ form.email.value|default_if_none:'' }}">
                                                </div>
                                            </div>
                                            <div class="update_detail col-md-6 col-12">
                                                <div class="form-group">
                                                    <label for="{{ form.nation.id_for_label }}">국가</label>
                                                    <select class="form-control form-control-md" id="{{ form.nation.id_for_label }}" name="{{ form.nation.html_name }}">
                                                        {% for choice in form.nation.field.choices %}
                                                            <option {% if form.nation.value == choice.0 %}selected{% endif %}>{{ choice.1 }}</option>
                                                        {% endfor %}
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="btn card-footer d-flex justify-content-end">
                                        {% csrf_token %}
                                        <button class="btn btn-primary" type="submit" onclick="sendit()">저장</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </main>
        
        <!-- Main End -->

    </div>
    <!-- Main Layout End -->
    

    <!-- Javascript Files -->
    <script src='{% static "vendors/jquery/jquery-3.5.0.min.js" %}'></script>
    <script src='{% static "vendors/bootstrap/bootstrap.bundle.min.js" %}'></script>
    <script src='{% static "vendors/magnific-popup/jquery.magnific-popup.js" %}'></script>
    <script src='{% static "vendors/svg-inject/svg-inject.js" %}'></script>
    <script src='{% static "vendors/modal-stepes/modal-steps.min.js" %}'></script>
    <script src='{% static "js/app.min.js" %}'></script>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <script>
        // 버튼 클릭 시 드롭다운 메뉴를 토글하는 함수
        function toggleDropdown() {
            var dropdownMenu = document.querySelector('.dropdown-menu');
            if (dropdownMenu.style.display === 'none') {
                dropdownMenu.style.display = 'block';
            } else {
                dropdownMenu.style.display = 'none';
            }
        }

        var dropdownButton = document.querySelector('.dropdown button');
        dropdownButton.addEventListener('click', toggleDropdown);
    </script>

    <script>
        function checkDisable(form) {
            var checkbox = form.ck;
            var deleteButton = form.delete_btn;
            if (checkbox.checked) {
                deleteButton.disabled = false;
            } else {
                deleteButton.disabled = true;
            }
        }
        </script>


    
</body>

</html>